/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var s=function(){return s=Object.assign||function(t){for(var e,i=1,r=arguments.length;i<r;i++){e=arguments[i];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},s.apply(this,arguments)},u=(function(){function n(t){this.stack=t.items,this.userFunction=t.func,this.delay=t.delay}return n.prototype.pause=function(){clearInterval(this._interval)},n.prototype.start=function(){this.isDone()||(this._interval=window.setInterval(this.fire.bind(this),this.delay))},n.prototype.reset=function(){this.stack=[],this.pause()},n.prototype.fire=function(){this.check(),this.userFunction(this.stack.shift()),this.check()},n.prototype.check=function(){if(!this.stack.length)return clearInterval(this._interval)},n.prototype.isDone=function(){return this.stack.length<=0},n})(),h=(function(){function n(t){this.query=t,this.toAnimate=Array.from(document.querySelectorAll(t))}return n.prototype.animateItems=function(t,e){var i=this,r=this.getItemsToAnimate();if(r){var o=new u({items:r,delay:t,func:function(a){return e?e(a):i.assignDelayAndOpacity(a)}});o.start()}},n.prototype.getItemsToAnimate=function(){if(!this.isDone()){var t=this.getVisibleAndHiddenItems(),e=t.visible,i=t.hidden;return this.toAnimate=i,e}},n.prototype.reset=function(){this.toAnimate=Array.from(document.querySelectorAll(this.query));var t=this.getVisibleAndHiddenItems().hidden;t.forEach(function(e){return e.style.opacity="0",e})},n.prototype.isDone=function(){return this.toAnimate.length<=0},n.prototype.assignDelayAndOpacity=function(t){if(t){var e=this.getDelay(t);Object.assign(t.style,{opacity:1}),e&&Object.assign(t.style,{transitionDelay:e})}},n.prototype.getVisibleAndHiddenItems=function(){var t=this,e={visible:[],hidden:[]};return this.toAnimate.reduce(function(i,r){var o=t.shouldBeVisible(r)?"visible":"hidden";return i[o]=i[o].concat(r),i},e)},n.prototype.getDelay=function(t){if(t&&t.dataset&&t.dataset.delay)return t.dataset.delay},n.prototype.shouldBeVisible=function(t){var e=t.getBoundingClientRect(),i=Math.max(document.documentElement.clientHeight,window.innerHeight);return!(e.bottom<0||e.top-i>=0)&&t.style.opacity!=="1"},n})(),c={delay:200,selector:".fadin",noInitalScrollEvent:!1,animationFunction:void 0},d=(function(){function n(t){t===void 0&&(t=c);var e=this,i=Object.assign({},c,t);this.animationService=new h(i.selector),this._detach=this.setUpEventListener("scroll",function(){e.animationService.animateItems(i.delay,i.animationFunction)}),i.noInitalScrollEvent||this.sendScroll()}return n.prototype.isDone=function(){return this.animationService.isDone()},n.prototype.detach=function(){return this._detach()},n.prototype.reset=function(){this.animationService.reset(),this.sendScroll()},n.prototype.sendScroll=function(){window.dispatchEvent(new Event("scroll"))},n.prototype.setUpEventListener=function(t,e){var i=this,r=function(){i.isDone()&&window.removeEventListener(t,r,!0),e()};return window.addEventListener(t,r.bind(this)),function(){return window.removeEventListener(t,r,!0)}},n})(),l=function(n,t){return new d(s({selector:n},t))};export{l as default};
